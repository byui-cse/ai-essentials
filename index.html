<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Was This Helpful?</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="bg-white p-6 rounded-lg shadow-md text-center">
    <p class="text-lg font-semibold mb-4">Was this helpful?</p>
    <div class="flex justify-center space-x-4">
      <button id="thumbsUp" class="hover:text-green-500 focus:outline-none" title="Yes">
        <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
          <path
            d="M7.24001 11V20H5.63001C4.73001 20 4.01001 19.28 4.01001 18.39V12.62C4.01001 11.73 4.74001 11 5.63001 11H7.24001ZM18.5 9.5H13.72V6C13.72 4.9 12.82 4 11.73 4H11.64C11.24 4 10.88 4.24 10.72 4.61L7.99001 11V20H17.19C17.92 20 18.54 19.48 18.67 18.76L19.99 11.26C20.15 10.34 19.45 9.5 18.51 9.5H18.5Z"
            fill="#000000" />
        </svg>
      </button>
      <button id="thumbsDown" class="hover:text-red-500 focus:outline-none" title="No">
        <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
          <path
            d="M20 5.61V11.38C20 12.27 19.27 13 18.38 13H16.77V4H18.38C19.28 4 20 4.72 20 5.61ZM5.34001 5.24L4.02001 12.74C3.86001 13.66 4.56001 14.5 5.50001 14.5H10.28V18C10.28 19.1 11.18 20 12.27 20H12.36C12.76 20 13.12 19.76 13.28 19.39L16.01 13V4H6.81001C6.08001 4 5.46001 4.52 5.33001 5.24H5.34001Z"
            fill="#000000" />
        </svg>
      </button>
    </div>
    <p id="feedbackMessage" class="mt-4 text-sm text-gray-600 hidden">Thank you for your feedback!</p>
  </div>

  <script>
    const FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSeoZASYOTUKabodEvZluy23yBsxXREFF0h_x2EPZUdO__FItg/formResponse';
    const ENTRY_ID = 'entry.1513911623';
    const ASSIGNMENT_ENTRY_ID = 'entry.900142231';

    const thumbsUp = document.getElementById('thumbsUp');
    const thumbsDown = document.getElementById('thumbsDown');
    const feedbackMessage = document.getElementById('feedbackMessage');

    // Pull from ?assignment=
    const assignmentName = new URLSearchParams(window.location.search).get('assignment');

    function submitFeedback(response) {
      const formData = new FormData();
      formData.append(ENTRY_ID, response);
      formData.append(ASSIGNMENT_ENTRY_ID, assignmentName);

      fetch(FORM_URL, {
        method: 'POST',
        mode: 'no-cors', // Required for Google Forms submission
        body: formData
      })
        .then(() => {
          feedbackMessage.classList.remove('hidden');
          thumbsUp.classList.add('opacity-50', 'cursor-not-allowed');
          thumbsDown.classList.add('opacity-50', 'cursor-not-allowed');
          thumbsUp.disabled = true;
          thumbsDown.disabled = true;
        })
        .catch(error => {
          console.error('Error submitting feedback:', error);
          feedbackMessage.textContent = 'Error submitting feedback. Please try again.';
          feedbackMessage.classList.remove('hidden');
        });
    }

    thumbsUp.addEventListener('click', () => submitFeedback('Yes'));
    thumbsDown.addEventListener('click', () => submitFeedback('No'));
  </script>
</body>

</html>